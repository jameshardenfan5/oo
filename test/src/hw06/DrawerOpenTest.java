package hw06;

import static org.junit.jupiter.api.Assertions.*;
import org.junit.jupiter.api.Test;
import java.io.*;

public class DrawerOpenTest{

	@Test
	public void SingletonTest(){

		DrawerOpen instance1=DrawerOpen.getInstance();
		DrawerOpen instance2=DrawerOpen.getInstance();

		assertEquals(instance1, instance2);
	}

	@Test
	public void OpenCloseButtonPushedwhileOpen(){

		DVDPlayer.getInstance().changeState(DrawerOpen.getInstance());
		DrawerOpen.getInstance().openCloseButtonPushed();
		assertEquals(DVDPlayer.getInstance().getState(),DrawerClosedNotPlaying.getInstance());
	}

	@Test
	public void PlayButtonPushedwhileopen(){

		DVDPlayer.getInstance().changeState(DrawerOpen.getInstance());
		DrawerOpen.getInstance().playButtonPushed();
		assertEquals(DVDPlayer.getInstance().getState(),DrawerClosedPlaying.getInstance());
	}

	@Test
	public void StopButtonPushedwhileOpen(){

		DVDPlayer.getInstance().changeState(DrawerOpen.getInstance());

		final ByteArrayOutputStream outContent=new ByteArrayOutputStream();

		System.setOut(new PrintStream(outContent));
		DrawerOpen.getInstance().stopButtonPushed();
		assertEquals("state:open",outContent.toString());
	}
}
